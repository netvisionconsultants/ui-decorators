{"version":3,"file":"ui-component.umd.js","sources":["../src/decorators/source.ts","../src/decorators/table.ts","../src/decorators/field.ts","../src/ui-component.ts"],"sourcesContent":["export function source(name: string) {\n    return function(constructor: any) {\n        constructor.prototype._source = name\n    }\n}\n","export interface TableArgs {\n    title: string\n    columns: Array<string>\n    sortOrder?: SortOrder\n    sortingColumn?: String\n    transform?: (val: Array<any>) => Array<any>\n}\n\nexport enum SortOrder {\n    ASC = 'ASC',\n    DESC = 'DESC'\n}\n\nexport function createTable(\n    rows: Array<any>,\n    columns: Array<String>,\n    sortOrder?: SortOrder,\n    sortingColumn?: String,\n    transform?: (val: Array<any>) => Array<any>\n) {\n    if (!rows || rows.length === 0) return []\n\n    if (columns.length === 0) throw new Error('Columns must be provided to the table() decorator')\n\n    let sortingColumnIdx: number\n\n    if (!sortOrder) {\n        sortOrder = SortOrder.ASC\n    }\n\n    if (!sortingColumn) {\n        sortingColumn = columns[0]\n        sortingColumnIdx = 0\n    } else {\n        sortingColumnIdx = columns.indexOf(sortingColumn)\n        if (sortingColumnIdx < 0) throw new Error('sortingColumn does not exist')\n    }\n\n    const mappedRows = rows.map(row => {\n        return columns.map(column => {\n            return row[column as any]\n        })\n    })\n\n    const sortedRows = mappedRows.sort(\n        (a: any, b: any): number => {\n            if (a[sortingColumnIdx] < b[sortingColumnIdx]) {\n                return sortOrder === SortOrder.ASC ? -1 : 1\n            }\n            if (a[sortingColumnIdx] > b[sortingColumnIdx]) {\n                return sortOrder === SortOrder.ASC ? 1 : -1\n            }\n            return 0\n        }\n    )\n\n    return transform ? transform(sortedRows) : sortedRows\n}\n\nexport function table({ title, columns, sortOrder, sortingColumn, transform }: TableArgs) {\n    return function(target: Object, propName: string) {\n        Object.defineProperty(target, `${propName}-UITable`, {\n            get() {\n                return {\n                    title,\n                    columns,\n                    type: 'table',\n                    value: createTable(this[propName], columns, sortOrder, sortingColumn, transform)\n                }\n            },\n            enumerable: true\n        })\n    }\n}\n","export interface FieldArgs {\n    label: string\n    displayEmpty?: boolean\n    longValue?: boolean\n    transform?: (val: any) => string\n}\n\nexport function field({ label, displayEmpty = false, longValue = false, transform }: FieldArgs) {\n    return function(target: Object, propName: string) {\n        Object.defineProperty(target, `${propName}-UIField`, {\n            get() {\n                return {\n                    label,\n                    longValue,\n                    displayEmpty,\n                    type: 'field',\n                    value: transform ? transform(this[propName]) : this[propName]\n                }\n            },\n            enumerable: true\n        })\n    }\n}\n","export { source } from './decorators/source'\nexport { table, TableArgs } from './decorators/table'\nexport { field, FieldArgs } from './decorators/field'\n\nexport interface Component {\n    fields: Array<any>\n    source: any\n    tables: Array<any>\n}\n\nexport default class UIComponent {\n    renderComponent() {\n        const component: Component = {\n            fields: [],\n            tables: [],\n            source: ''\n        }\n\n        for (let k in this) {\n            if (k.endsWith('UIField')) {\n                component.fields.push(this[k])\n            }\n            if (k.endsWith('UITable')) {\n                component.tables.push(this[k])\n            }\n            if (k === '_source') {\n                component.source = this[k]\n            }\n        }\n        return component\n    }\n}\n"],"names":[],"mappings":"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"}